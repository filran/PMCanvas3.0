<html>
<head>
    <meta charset="utf-8"/>

    <script type="text/javascript" src="scripts/jquery/jquery-2.1.0.js"></script>
    
    <script type="text/javascript" src="scripts/jquery-ui/jquery-ui-1.10.4.custom.js"></script>
    <link type="text/css" rel="stylesheet" href="scripts/jquery-ui/jquery-ui-1.10.4.custom.css">
    
    <script type="text/javascript" src="scripts/proportion.js"></script>
    <script type="text/javascript" src="scripts/plugins/redimensionar.js"></script>

    <script type="text/javascript" src="scripts/plugins/expand/expand.js"></script>
    <link type="text/css" rel="stylesheet" href="scripts/plugins/expand/expand.css" >

    <script type="text/javascript" src="scripts/plugins/cortar_texto.js"></script>

    <link type="text/css" rel="stylesheet" href="styles/canvas.css">
    
     <script type="text/javascript">
        $(function(){        
            //REDIMENSIONAR============================
            $("#wrap").redimensionar();
            window.onresize = function(){
                $("#wrap").redimensionar();
            }


            //ADD SCROLLABLE============================
            $(".receberpostit").addClass("scrollable");

            //SORTABLE============================
            $( "ul.receberpostit" ).sortable({
                connectWith: "ul.receberpostit",
            });
            $( ".receberpostit" ).disableSelection();



            //ABRIR E FECHAR OPENPOSTITS============================
            $(".postits").css({"visibility":"hidden"});
            $(".postits .postit").hide();
            
            $(".openpostits").draggable({
                containment:"window",
            }).mousedown(function(){
                $("#area > li").droppable({
                    accept:".openpostits",
                    activate:function(event,ui){
                        ocultarPostits();
                        $(".postits").attr("drop","auto");
                    },
                    drop:function(event,ui){
                        id = $(this).attr("id");
                        mostrarPostits(id);
                    }
                });
            }).click(function(event,ui){
                visibility = $(".postits").css("visibility");
                
                //drop = auto - não está na área
                //drop = "area" - dropado na area
                drop = $(".postits").attr("drop");

                //mostrar somente quando estiver na área
                if( drop!="auto" && drop!="out" ){
                    if( visibility=="visible" ){
                        ocultarPostits();
                    }else{
                        mostrarPostits(drop);
                    }
                }                
            });
            
            function mostrarPostits(id){        
                $(".postits .postit[areacandidata="+id+"]").show();                     
                $(".postits").css({"visibility":"show"}).fadeIn(100);
                $(".postits").attr("drop",id);
            }

            function ocultarPostits(){
                $(".postits").fadeOut(100,function(){
                    $(this).css({"visibility":"hidden"});
                    $(".postits .postit").hide();
                });                
            }            


            //AUTOAJUSTAR POSTITS================================
            /*
            ler quantidade de colunas
            ler largura,margin e padding de cada postit
            ler margin e padding do wrap
            descobrir largura para caber os postits{
                largura postit = margim e padding da dir e esq + largura
                largura total dos post-its = largura postit * quantidade de postit + padding da esq e da dir do wrap                
            }
                
            
            
            */

            //DRAG=================================                       
            $(".postits").draggable({}).resizable();

 
            $(".postits").dblclick(function(){
                $(this).fadeOut(100,function(){
                    $(this).css({"visibility":"hidden"});
                });
            });

            //INSERIR ÍCONE DE ZOOM NAS ÁREAS DO CANVAS==========================
            $("#area > li").each(function(){
                idarea = $(this).attr("id");
                $(this).append("<div class='zoomarea'><a href='#' id='zoomarea_"+idarea+"'>+</a></div>");
            });
            
            //EXPAND============================
            $("li.postit").dblclick(function(){
                $(this).expand("postit");
            });
            $("div.zoomarea a").dblclick(function(){
                $(this).expand("area");
            });

            
            //CORTAR TEXTO DOS POST-IT
            $(".postit").cortar_texto(50);

            $(".texto").css({"visibility":"hidden"});
            

        });
     </script>
</head>
<body>

<div class="openpostits"><span>P's</span></div>

<ul id="postits" class="postits" drop="auto">
    <ul class="receberpostit"> 
        <li postit-id="1" class="postit" autor="Filipe Arantes" areacandidata="just">
            Colesterol aumentado
        </li>
        <li postit-id="2" class="postit" autor="Filipe Arantes" areacandidata="just">
            Imagem mal cuidada
        </li>
        <li postit-id="3" class="postit" autor="Filipe Arantes" areacandidata="just">
            Mobilidade reduzida
        </li>
        <li postit-id="4" class="postit" autor="Filipe Arantes" areacandidata="just">
            Roupas não vestem
        </li>
        <li postit-id="5" class="postit" autor="Filipe Arantes" areacandidata="just">
            Eu reeducado e 10kg mais magro
        </li>
        <li postit-id="6" class="postit" autor="Filipe Arantes" areacandidata="obj">
            Emagrecer 10kg com saúde até 28fev, tendo apoio multidisciplinar e incorporando hábitos saudáveis, gastando até R$ 6.500
        </li>
        <li postit-id="1" class="postit" autor="Filipe Arantes" areacandidata="just">
            Colesterol aumentado
        </li>
        <li postit-id="2" class="postit" autor="Filipe Arantes" areacandidata="just">
            Imagem mal cuidada
        </li>
        <li postit-id="3" class="postit" autor="Filipe Arantes" areacandidata="just">
            Mobilidade reduzida
        </li>
        <li postit-id="4" class="postit" autor="Filipe Arantes" areacandidata="just">
            Roupas não vestem
        </li>
        <li postit-id="5" class="postit" autor="Filipe Arantes" areacandidata="just">
            Eu reeducado e 10kg mais magro
        </li>
        <li postit-id="6" class="postit" autor="Filipe Arantes" areacandidata="obj">
            Emagrecer 10kg com saúde até 28fev, tendo apoio multidisciplinar e incorporando hábitos saudáveis, gastando até R$ 6.500
        </li>
    </ul>        
</ul>

<div id="wrap" class="centralizar_div">

    <ul id="pmcanvas">
        <ul id="header">
            <li id="gp"><div><h1>GP</h1></div></li>
            <li id="pitch"><div><h1>PITCH</h1></div></li>
        </ul>

        <ul id="area" class="area">
            <li id="just" class="margem_direita margem_embaixo"><h1>JUSTIFICATIVAS</h1>
                <ul class="receberpostit"></ul>
            </li>

            <li id="prod" class="margem_direita margem_embaixo"><h1>PRODUTO</h1>
                <ul class="receberpostit"></ul>
            </li>
            
            <li id="stake" class="margem_direita margem_embaixo"><h1>STAKEHOLDERS</h1>
                <ul class="receberpostit"></ul>
            </li>
            
            <li id="premissas" class="margem_direita margem_embaixo"><h1>PREMISSAS</h1>
                <ul class="receberpostit"></ul>
            </li>
            
            <li id="riscos" class="margem_embaixo"><h1>RISCOS</h1>
                <ul class="receberpostit"></ul>
            </li>


            <li id="obj" class="margem_direita margem_embaixo"><h1>OBJETIVOS SMART</h1>
                <ul class="receberpostit"></ul>
            </li>

            <li id="requisitos" class="margem_direita"><h1>REQUISITOS</h1>
                <ul class="receberpostit"></ul>
            </li>
            
            <li id="equipe" class="margem_direita margem_embaixo margem_esquerda"><h1>EQUIPE</h1>
                <ul class="receberpostit"></ul>
            </li>
            
            <li id="entregas" class="margem_direita margem_embaixo"><h1>GRUPO DE ENTREGAS</h1>
                <ul class="receberpostit"></ul>
            </li>
            
            <li id="tempo" class="margem_embaixo"><h1>TEMPO</h1>
                <ul class="receberpostit"></ul>
            </li>


            <li id="beneficios"><h1>BENEFÍCIOS</h1>
                <ul class="receberpostit"></ul>
            </li>
         
            <li id="restricoes"><h1>RESTRIÇÕES</h1>
                <ul class="receberpostit"></ul>
            </li> 

            <li id="custos"><h1>CUSTOS</h1>
                <ul class="receberpostit"></ul>
            </li>          
        </ul>     
    </ul>
</div>

</body>

</html>
